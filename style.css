:root{
  --pink:#ff6ba6;
  --pale:#fff0f6;
  --accent:#ffb3d1;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: radial-gradient(circle at 10% 10%, #fff7fb 0%, #ffeef6 25%, #fff 60%);
  color:#222;
  min-height:100vh;
}

/* Gentle animated gradient background for more visual depth */
body::before{
  content:'';
  position:fixed; inset:0; z-index:0; pointer-events:none;
  background: linear-gradient(120deg, rgba(255,235,245,0.12), rgba(255,245,238,0.06) 35%, rgba(255,230,245,0.08));
  mix-blend-mode: screen; opacity:1;
  animation: bgShift 12s ease-in-out infinite;
}
@keyframes bgShift{ 0%{ transform:translateY(0) } 50%{ transform:translateY(6vh) } 100%{ transform:translateY(0) } }

/* Layout */
#gift-box-container{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
  width:100vw;
  position:fixed; inset:0; z-index:9999;
}

footer{
  position:fixed; bottom:8px; left:0; right:0; text-align:center; font-size:0.85rem; color:#b04a70;
}

/* Gift box */
#gift-box{ position:relative; width:140px; height:140px; cursor:pointer; }
.lid{ width:140px; height:40px; background:linear-gradient(90deg,var(--accent),var(--pink)); border-radius:18px 18px 8px 8px; position:absolute; top:0; left:0; box-shadow:0 6px 22px rgba(255,106,166,0.18); transition:transform .6s cubic-bezier(.18,.89,.32,1.28); z-index:3 }
.body{ width:140px; height:100px; background:linear-gradient(135deg,#ffd7e8 60%, var(--accent)); border-radius:0 0 18px 18px; position:absolute; top:36px; left:0; box-shadow:0 10px 28px rgba(255,106,166,0.12); border-top:6px solid #fff; z-index:2 }
.bow{ position:absolute; top:-28px; left:42px; width:56px; height:34px; z-index:4 }
.bow::before,.bow::after{ content:""; position:absolute; top:0; width:28px; height:34px; background:var(--pink); border-radius:50% 50% 0 0 }
.bow::before{ left:0; transform:rotate(-18deg) }
.bow::after{ right:0; transform:rotate(18deg); background:var(--accent); opacity:.95 }

/* subtle bounce */
#gift-box{ animation:bounce 1.6s infinite }
@keyframes bounce{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-16px) } }

#click-me-text{ margin-top:18px; font-size:1.05rem; color:var(--pink); font-weight:700; letter-spacing:.6px; text-shadow:0 3px 12px rgba(255,180,210,0.25) }

/* Greeting overlay */
#greeting{ position:fixed; inset:0; display:flex; justify-content:center; align-items:center; z-index:10000; }
#confetti-canvas{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none }

#message{ position:relative; background:linear-gradient(180deg, rgba(255,244,249,0.88), rgba(255,236,245,0.92)); padding:34px 42px; border-radius:26px; text-align:center; box-shadow:0 30px 80px rgba(220,100,160,0.14); max-width:760px; width:92%; margin:24px;
  transform: scale(.94) translateY(20px); opacity:0; transition: transform .85s cubic-bezier(.2,.9,.25,1), opacity .65s ease, box-shadow .4s ease;
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,200,220,0.45);
}
/* Ensure message sits above decorative canvas */
#message{ z-index:10001; position:relative }

/* Overlay inside the card where falling items appear */
.falls-overlay{ position:absolute; inset:0; pointer-events:none; z-index:10000; overflow:hidden }
.message-content{ position:relative; z-index:10002 }

/* Entered state (after password) */
.entered{ transform: scale(1) translateY(0); opacity:1 }

/* Portrait gentle heartbeat */
#portrait{ transition: transform .4s ease }
.pulse{ animation: heartbeat 1.2s ease-in-out infinite }
@keyframes heartbeat{ 0%{ transform:scale(1) } 30%{ transform:scale(1.06) } 60%{ transform:scale(0.98) } 100%{ transform:scale(1) } }

/* Greet name pop */
/* Heading styling */
#greet-name{ transform-origin:center; display:inline-block; transition: transform .6s cubic-bezier(.2,.9,.25,1); font-family: 'Playfair Display', serif; font-weight:700; color:#6e1f3b; letter-spacing:0.6px; text-shadow: 0 6px 20px rgba(255,180,210,0.12); font-size:2.2rem }
.pop{ transform: scale(1.06) }

/* Signature-like styling for the recipient's name inside the heading */
.name-signature{ font-family: 'Great Vibes', cursive; font-size:2.6rem; color:#7b1f3b; display:inline-block; margin-left:8px; vertical-align:middle; transform-origin:center; text-shadow:0 6px 18px rgba(180,80,120,0.14) }

/* Soft background spotlight when message opens */
.bg-spot{ position:absolute; inset:0; background: radial-gradient(circle at 50% 30%, rgba(255,230,240,0.45), rgba(255,240,245,0.2) 40%, transparent 60%); pointer-events:none; z-index:9998; opacity:0; transition:opacity .6s; }
.bg-spot.show{ opacity:1 }
#bg-spot .falling, .bg-spot .falling{ pointer-events:none; position:absolute; top:-40px; display:block; will-change:transform, opacity; }
.bg-spot .falling{ font-size:18px; opacity:.95; transform-origin:center; }

@keyframes fallDown {
  0% { transform: translateY(-10vh) rotate(0deg); opacity:1 }
  80% { opacity:0.9 }
  100% { transform: translateY(110vh) rotate(360deg); opacity:0.18 }
}

/* Full-page overlay for falling items that start from top of the page */
#global-falls{ position:fixed; inset:0; pointer-events:none; z-index:10003; overflow:hidden }
#global-falls .falling{ position:absolute; top:-12vh; left:0; will-change:transform,opacity; }
#greet-name{ font-size:2.2rem; margin:0 0 8px; color:#7b1f3b }
#typed{ font-size:1.05rem; color:#4a2430; min-height:48px; margin-bottom:14px }
#typed{ font-size:1.05rem; color:#4a2430; min-height:56px; margin-bottom:14px; white-space: pre-wrap; line-height:1.5 }
#portrait-wrap{ width:220px; height:220px; margin:14px auto 6px; border-radius:16px; overflow:hidden; position:relative; box-shadow:0 14px 40px rgba(180,80,120,0.12); border:6px solid rgba(255,255,255,0.85); background:linear-gradient(180deg,#fff,#fff0f6) }
#portrait{ width:100%; height:100%; object-fit:cover; display:block; border-radius:12px; box-shadow:none; z-index:10002; position:relative }
.portrait-placeholder{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:56px; color:#ff6ba6; z-index:10001 }
.portrait-placeholder[hidden]{ display:none }

/* Signature under portrait */
.signature{ margin-top:10px; font-family:'Great Vibes', 'Playfair Display', serif; color:#7b1f3b; font-size:1.35rem; text-align:right; opacity:0.98 }
.signature .sig-name{ display:inline-block; margin-left:6px; font-weight:700; font-size:1.05rem }

/* subtle decorative ornament near top-left/right */
.ornament{ position:fixed; top:24px; right:28px; font-size:20px; color:rgba(255,110,160,0.9); z-index:10004; opacity:0.9 }
.actions{ display:flex; gap:10px; justify-content:center; margin-top:14px }
.actions button{ background:linear-gradient(90deg,var(--pink),var(--accent)); color:white; border:0; padding:10px 16px; border-radius:12px; cursor:pointer; font-weight:700; box-shadow: 0 8px 20px rgba(255,120,170,0.12) }
.actions button:hover{ transform: translateY(-2px); box-shadow: 0 14px 36px rgba(255,120,170,0.18) }
.actions button:active{ transform:translateY(1px) }

/* lid open */
.lid.open{ transform: translateY(-64px) rotate(-20deg) }

@media(min-width:800px){ #greet-name{ font-size:2.6rem } #portrait{ width:220px } }

/* Balloon floating animation on landing page */
#balloon-wrap{ position:fixed; inset:0; pointer-events:none; z-index:9000; overflow:hidden }
.balloon{ position:absolute; bottom:-180px; left:10%; width:64px; height:86px; border-radius:56% 56% 48% 48%; background:#ff6ba6; box-shadow: inset -8px -8px 18px rgba(255,255,255,0.15), 0 10px 22px rgba(120,40,80,0.08); opacity:0.95; transform:translateY(0) rotate(-6deg); animation: rise 12s linear infinite, floatSide 4s ease-in-out infinite; }
.balloon::after{ content:''; position:absolute; left:50%; top:92%; transform:translateX(-50%); width:2px; height:76px; background:rgba(0,0,0,0.12); border-radius:2px }

/* Slight color and size variations via nth-child */
#balloon-wrap .balloon:nth-child(1){ left:6%; background:#ff90b3; width:54px; height:72px; animation-duration:10s; animation-delay:0.3s }
#balloon-wrap .balloon:nth-child(2){ left:20%; background:#ffd6e5; width:70px; height:94px; animation-duration:13s; animation-delay:1.2s }
#balloon-wrap .balloon:nth-child(3){ left:34%; background:#ffb3d1; width:58px; height:76px; animation-duration:11.5s; animation-delay:0.6s }
#balloon-wrap .balloon:nth-child(4){ left:48%; background:#ffd0e8; width:66px; height:88px; animation-duration:14s; animation-delay:2s }
#balloon-wrap .balloon:nth-child(5){ left:62%; background:#ff9fb8; width:52px; height:70px; animation-duration:9.5s; animation-delay:0.1s }
#balloon-wrap .balloon:nth-child(6){ left:75%; background:#ffb8cc; width:72px; height:98px; animation-duration:15s; animation-delay:1.6s }
#balloon-wrap .balloon:nth-child(7){ left:84%; background:#ffe6f1; width:48px; height:66px; animation-duration:12.5s; animation-delay:0.9s }
#balloon-wrap .balloon:nth-child(8){ left:92%; background:#ffc3de; width:60px; height:82px; animation-duration:13.5s; animation-delay:2.6s }

@keyframes rise{
  0%{ transform: translateY(0) rotate(-6deg); opacity:0 }
  6%{ opacity:1 }
  100%{ transform: translateY(-140vh) rotate(18deg); opacity:0.92 }
}

@keyframes floatSide{
  0%{ transform: translateY(0) translateX(0) }
  50%{ transform: translateY(0) translateX(28px) }
  100%{ transform: translateY(0) translateX(0) }
}

/* Make sure balloons don't show once greeting opens (they can remain but hide visually) */
#greeting.show-balloons + #balloon-wrap, #greeting.show-balloons ~ #balloon-wrap{ display:block }

/* Balloons that originate from the gift box */
.gift-balloon-wrap{ position:fixed; pointer-events:none; inset:0; z-index:10002; overflow:visible }
.gift-balloon{ position:fixed; width:56px; height:74px; border-radius:56% 56% 48% 48%; box-shadow: inset -6px -6px 14px rgba(255,255,255,0.12), 0 8px 14px rgba(120,40,80,0.08); opacity:0; transform-origin:center bottom; }
.gift-balloon::after{ content:''; position:absolute; left:50%; top:92%; transform:translateX(-50%); width:2px; height:60px; background:rgba(0,0,0,0.12); border-radius:2px }

/* Anim: rise from the starting top to far above the viewport while swaying */
@keyframes riseFromBox{
  0%{ transform: translateY(0) rotate(-6deg); opacity:0 }
  6%{ opacity:1 }
  70%{ transform: translateY(-80vh) rotate(12deg) }
  100%{ transform: translateY(-140vh) rotate(22deg); opacity:0 }
}

@keyframes sway{
  0%{ transform: translateX(0) }
  50%{ transform: translateX(22px) }
  100%{ transform: translateX(0) }
}

/* small color presets so JS can swap classless colors */
.gift-balloon.color-1{ background:#ff90b3 }
.gift-balloon.color-2{ background:#ffd6e5 }
.gift-balloon.color-3{ background:#ffb3d1 }
.gift-balloon.color-4{ background:#ffd0e8 }
.gift-balloon.color-5{ background:#ff9fb8 }
.gift-balloon.color-6{ background:#ffb8cc }


